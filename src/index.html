<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <base href="/">

  <link rel="icon" type="image/x-icon" href="assets/images/title-icon.png">
  <title>Fabrae</title>

  <meta name="author" content="Team Droid">
  <meta name="description" content="">

  <meta property="og:image" content="https://gowthamant.github.io/focus-detox/assets/images/coverbg.jpg">
  <meta property="og:description" content="">
  <meta property="og:title" content="Fabrae">
  <meta property="og:url" content="https://fabrae.com/">
  <meta property="og:type"  content="Web Application">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
</head>
<body>
  <app-root></app-root>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.min.js" integrity="sha384-cn7l7gDp0eyniUwwAZgrzD06kc/tftFf19TOAs2zVinnD/C7E91j9yyk5//jjpt/" crossorigin="anonymous"></script>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script> 
  <script> 
    var options = { 
      key: "rzp_test_OKeq4A2zbcg79s", 
      // Enter the Key ID generated from the Dashboard 
      amount: "50000", // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise 
      currency: "INR", 
      name: "Acme Corp", 
      description: "Test Transaction", 
      image: "https://example.com/your_logo", 
      order_id: "order_Hr1riJ5qhDpKkY", //This is a sample Order ID. Pass the id obtained in the previous step 
      handler: async function (response) { 
        let responseData = await fetch( 
          "http://localhost:8000/payment/verify/order_Hr1riJ5qhDpKkY", 
          { 
            method: "POST", 
            body: JSON.stringify({ 
              razorpay_payment_id: response.razorpay_payment_id, 
              razorpay_order_id: response.razorpay_order_id, 
              razorpay_signature: response.razorpay_signature, 
            }), 
          } 
        ); 
        await console.log("Response return =", responseData); 
        alert(response.razorpay_payment_id); 
        alert(response.razorpay_order_id); 
        alert(response.razorpay_signature); 
      }, 
      prefill: { 
        name: "Gaurav Kumar", 
        email: "gaurav.kumar@example.com", 
        contact: "9999999999", 
      }, 
      notes: { address: "Razorpay Corporate Office" }, 
      theme: { color: "#3399cc" }, 
    }; 
    var rzp1 = new Razorpay(options); 
    rzp1.on("payment.failed", function (response) { 
      alert(response.error.code); 
      alert(response.error.description); 
      alert(response.error.source); 
      alert(response.error.step); 
      alert(response.error.reason); 
      alert(response.error.metadata.order_id); 
      alert(response.error.metadata.payment_id); 
    }); 
    document.getElementById("rzp-button1").onclick = function (e) { 
      rzp1.open(); 
      e.preventDefault(); 
    }; 

    var orderId; 
    $(document).ready(function () { 
      var settings = { 
        url: "/create/orderId", 
        method: "POST", 
        timeout: 0, 
        headers: { 
          "Content-Type": "application/json", 
        }, 
        data: JSON.stringify({ 
          amount: "50000", 
        }), 
      }; 

      //creates new orderId everytime 
      $.ajax(settings).done(function (response) { 
        orderId = response.orderId; 
        console.log(orderId); 
        $("button").show(); 
      }); 
    }); 
  </script> 
</body>
</html>
